<!DOCTYPE html>
<html lang="fr" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-translate-key="page_title">Mosaia Studio - Accueil</title>
    <link href="path/to/your/tailwind.css" rel="stylesheet">
    
    <link rel="alternate" hreflang="fr" href="https://votresite.com/index.html" />
    <link rel="alternate" hreflang="en" href="https://votresite.com/en/index.html" />
    <link rel="alternate" hreflang="nl" href="https://votresite.com/nl/index.html" />
    <link rel="alternate" hreflang="de" href="https://votresite.com/de/index.html" />
    <link rel="alternate" hreflang="es" href="https://votresite.com/es/index.html" />
</head>
<body class="bg-dark-grey text-light-grey">

    <header class="hidden lg:flex justify-between items-center px-8 py-4 fixed top-0 w-full z-50 bg-dark-grey/90 backdrop-blur-sm">
        <a href="index.html" class="text-xl font-serif text-bronze">Mosaia Studio</a>
        
        <nav class="flex space-x-8">
            <a href="index.html" data-translate-key="nav_home" class="nav-link nav-lang-link font-semibold text-bronze">ACCUEIL</a>
            <a href="portfolio.html" data-translate-key="nav_portfolio" class="nav-link nav-lang-link">PORTFOLIO</a>
            <a href="studio.html" data-translate-key="nav_studio" class="nav-link nav-lang-link">STUDIO</a>
            <a href="bespoke.html" data-translate-key="nav_bespoke" class="nav-link nav-lang-link">SUR-MESURE</a>
            <a href="process.html" data-translate-key="nav_process" class="nav-link nav-lang-link">PROCESSUS</a>
            <a href="partners.html" data-translate-key="nav_partners" class="nav-link nav-lang-link">PARTENAIRES</a>
            <a href="contact.html" data-translate-key="nav_contact" class="nav-link nav-lang-link">CONTACT</a>
        </nav>

        <div id="lang-dropdown-container" class="relative">
            <button id="lang-dropdown-btn" class="flex items-center space-x-2 p-2 hover:text-bronze" aria-expanded="false" aria-controls="lang-menu">
                <span id="current-lang-display" class="font-semibold text-bronze">FR</span>
                <svg id="dropdown-arrow" class="w-4 h-4 transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
            </button>
            <div id="lang-menu" class="absolute right-0 mt-2 w-40 bg-dark-grey border border-bronze shadow-lg hidden z-50">
                <p class="px-4 py-2 text-sm text-bronze font-semibold" data-translate-key="lang_selector_title">Choisir la Langue</p>
                <a href="#" data-lang="fr" class="lang-option block px-4 py-2 hover:bg-bronze hover:text-dark-grey active text-bronze font-semibold">Français (FR)</a>
                <a href="#" data-lang="en" class="lang-option block px-4 py-2 hover:bg-bronze hover:text-dark-grey">English (EN)</a>
                <a href="#" data-lang="nl" class="lang-option block px-4 py-2 hover:bg-bronze hover:text-dark-grey">Nederlands (NL)</a>
                <a href="#" data-lang="de" class="lang-option block px-4 py-2 hover:bg-bronze hover:text-dark-grey">Deutsch (DE)</a>
                <a href="#" data-lang="es" class="lang-option block px-4 py-2 hover:bg-bronze hover:text-dark-grey">Español (ES)</a>
            </div>
        </div>
    </header>

    <header class="flex lg:hidden justify-between items-center px-4 py-4 fixed top-0 w-full z-50 bg-dark-grey/90 backdrop-blur-sm">
        <a href="index.html" class="text-xl font-serif text-bronze">Mosaia Studio</a>
        
        <button id="mobileMenuBtn" class="p-2 border border-light-grey rounded hover:border-bronze hover:text-bronze transition-colors duration-300" aria-controls="mobileMenu" aria-expanded="false">
            <span data-translate-key="menu_btn">Menu</span>
        </button>
    </header>

    <div id="mobileMenu" class="fixed inset-0 bg-dark-grey z-40 p-8 pt-20 transition-transform transform hidden lg:hidden">
        <nav class="flex flex-col space-y-6 text-2xl">
            <a href="index.html" data-translate-key="nav_home" class="nav-lang-link text-bronze font-semibold">ACCUEIL</a>
            <a href="portfolio.html" data-translate-key="nav_portfolio" class="nav-lang-link">PORTFOLIO</a>
            <a href="studio.html" data-translate-key="nav_studio" class="nav-lang-link">STUDIO</a>
            <a href="bespoke.html" data-translate-key="nav_bespoke" class="nav-lang-link">SUR-MESURE</a>
            <a href="process.html" data-translate-key="nav_process" class="nav-lang-link">PROCESSUS</a>
            <a href="partners.html" data-translate-key="nav_partners" class="nav-lang-link">PARTENAIRES</a>
            <a href="contact.html" data-translate-key="nav_contact" class="nav-lang-link">CONTACT</a>
        </nav>
        
        <div id="lang-selector-mobile" class="mt-10 border-t border-light-grey pt-6">
            <p class="text-lg mb-4 font-semibold" data-translate-key="lang_selector_title">Choisir la Langue :</p>
            <div class="flex space-x-4">
                <button data-lang="fr" class="lang-button text-lg border p-2 w-16 text-bronze font-semibold active">FR</button>
                <button data-lang="en" class="lang-button text-lg border p-2 w-16 hover:text-bronze">EN</button>
                <button data-lang="nl" class="lang-button text-lg border p-2 w-16 hover:text-bronze">NL</button>
                <button data-lang="de" class="lang-button text-lg border p-2 w-16 hover:text-bronze">DE</button>
                <button data-lang="es" class="lang-button text-lg border p-2 w-16 hover:text-bronze">ES</button>
            </div>
        </div>
    </div>
    
    <main class="pt-20 lg:pt-24">
        
        <section class="min-h-screen flex flex-col justify-center items-center text-center p-8">
            <h1 class="text-5xl lg:text-7xl font-serif leading-tight fade-in-up">
                <span data-translate-key="hero_title" class="block">L’ART DE LA MOSAÏQUE</span>
                <span data-translate-key="hero_title_bronze" class="block text-bronze">QUI ÉVEILLE L’ÉMOTION</span>
                <span data-translate-key="hero_title_end" class="block">ET PERDURE</span>
            </h1>
            <div class="mt-10 space-y-4 lg:space-y-0 lg:space-x-8 fade-in-up delay-200">
                <a href="portfolio.html" class="inline-block py-3 px-8 border border-bronze text-bronze hover:bg-bronze hover:text-dark-grey transition-colors duration-300" data-translate-key="cta_portfolio">EXPLORER LE PORTFOLIO</a>
                <a href="bespoke.html" class="inline-block py-3 px-8 bg-bronze text-dark-grey hover:bg-light-grey hover:text-dark-grey transition-colors duration-300" data-translate-key="cta_bespoke">DÉMARRER UN PROJET SUR MESURE</a>
            </div>
        </section>
        
        <section class="max-w-4xl mx-auto text-center p-8 py-20">
            <p class="text-xl lg:text-2xl font-light leading-relaxed fade-in-up">
                <span data-translate-key="intro_text">Né d’une passion profonde pour l’artisanat et l’art, Mosaia Studio fusionne la tradition et le design moderne,</span>
                <span data-translate-key="intro_text_bronze" class="text-bronze">mêlant la précision artisanale à l’expression artistique.</span>
            </p>
        </section>

        <section class="py-20 bg-light-grey text-dark-grey">
            <h2 class="text-4xl text-center mb-12 font-serif fade-in-up" data-translate-key="key_domains_title">NOS DOMAINES CLÉS</h2>
            <div class="max-w-6xl mx-auto grid md:grid-cols-3 gap-8 p-8">
                <div class="text-center p-6 border border-dark-grey fade-in-up">
                    <h3 class="text-2xl font-semibold mb-2" data-translate-key="domain_pools_title">PISCINES</h3>
                    <p data-translate-key="domain_pools_desc">Transformez votre piscine en une œuvre d'art aquatique durable et sophistiquée.</p>
                </div>
                <div class="text-center p-6 border border-dark-grey fade-in-up delay-100">
                    <h3 class="text-2xl font-semibold mb-2" data-translate-key="domain_walls_title">MURS & FAÇADES</h3>
                    <p data-translate-key="domain_walls_desc">Revêtements architecturaux d'exception pour intérieurs et extérieurs, redéfinissant l'espace.</p>
                </div>
                <div class="text-center p-6 border border-dark-grey fade-in-up delay-200">
                    <h3 class="text-2xl font-semibold mb-2" data-translate-key="domain_artworks_title">ARTWORKS</h3>
                    <p data-translate-key="domain_artworks_desc">Œuvres d'art uniques et installations personnalisées. L'expression pure de votre vision créative.</p>
                </div>
            </div>
        </section>

        <section class="py-20 text-center p-8">
            <p class="text-3xl lg:text-4xl font-serif italic fade-in-up">
                <span data-translate-key="quote_1_bronze" class="text-bronze">« La mosaïque n’est pas une décoration,</span>
                <span data-translate-key="quote_2" class="block">c’est une narration. »</span>
            </p>
        </section>
    </main>
    
    <footer class="bg-darker-grey text-light-grey p-8 text-center mt-10">
        <p class="mb-2 text-bronze" data-translate-key="footer_tagline">L'ART DE LA MOSAÏQUE QUI ÉVEILLE L'ÉMOTION ET DURE</p>
        <p data-translate-key="footer_copyright">© MOSAIA STUDIO – PAR AMARU BRANDS</p>
    </footer>

    <script>
        // --- 1. DONNÉES DE TRADUCTION ---
        const translations = {
            'page_title': { fr: "Mosaia Studio - Accueil", en: "Mosaia Studio - Home", nl: "Mosaia Studio - Startpagina", de: "Mosaia Studio - Startseite", es: "Mosaia Studio - Inicio" },
            'nav_home': { fr: "ACCUEIL", en: "HOME", nl: "STARTPAGINA", de: "STARTSEITE", es: "INICIO" },
            'nav_portfolio': { fr: "PORTFOLIO", en: "PORTFOLIO", nl: "PORTFOLIO", de: "PORTFOLIO", es: "PORTAFOLIO" },
            'nav_studio': { fr: "STUDIO", en: "STUDIO", nl: "STUDIO", de: "STUDIO", es: "ESTUDIO" },
            'nav_bespoke': { fr: "SUR-MESURE", en: "BESPOKE", nl: "MAATWERK", de: "MAẞARBEIT", es: "A MEDIDA" },
            'nav_process': { fr: "PROCESSUS", en: "PROCESS", nl: "PROCES", de: "PROZESS", es: "PROCESO" },
            'nav_partners': { fr: "PARTENAIRES", en: "PARTNERS", nl: "PARTNERS", de: "PARTNER", es: "SOCIOS" },
            'nav_contact': { fr: "CONTACT", en: "CONTACT", nl: "CONTACT", de: "KONTAKT", es: "CONTACTO" },
            'menu_btn': { fr: "Menu", en: "Menu", nl: "Menu", de: "Menü", es: "Menú" },
            
            'hero_title': { fr: "L’ART DE LA MOSAÏQUE", en: "THE ART OF MOSAIC", nl: "DE KUNST VAN MOZAÏEK", de: "DIE KUNST DES MOSAIKS", es: "EL ARTE DEL MOSAICO" },
            'hero_title_bronze': { fr: "QUI ÉVEILLE L’ÉMOTION", en: "THAT AWAKENS EMOTION", nl: "DAT EMOTIE OPROEPT", de: "DIE EMOTIONEN WECKT", es: "QUE DESPIERTA EMOCIÓN" },
            'hero_title_end': { fr: "ET PERDURE", en: "AND ENDURES", nl: "EN VOORTDUURT", de: "UND BESTEHT", es: "Y PERDURA" },
            
            'cta_portfolio': { fr: "EXPLORER LE PORTFOLIO", en: "EXPLORE THE PORTFOLIO", nl: "ONTDEK DE PORTFOLIO", de: "PORTFOLIO ENTDECKEN", es: "EXPLORAR EL PORTAFOLIO" },
            'cta_bespoke': { fr: "DÉMARRER UN PROJET SUR MESURE", en: "START A BESPOKE PROJECT", nl: "START EEN MAATWERK PROJECT", de: "EIN MASSGESCHNEIDERTES PROJEKT STARTEN", es: "INICIAR UN PROYECTO A MEDIDA" },
            
            'intro_text': { fr: "Né d’une passion profonde pour l’artisanat et l’art, Mosaia Studio fusionne la tradition et le design moderne,", en: "Born from a deep passion for craftsmanship and art, Mosaia Studio merges tradition with modern design,", nl: "Geboren uit een diepe passie voor vakmanschap en kunst, versmelt Mosaia Studio traditie met modern design,", de: "Aus tiefer Leidenschaft für Handwerk und Kunst entstanden, vereint das Mosaia Studio Tradition mit modernem Design,", es: "Nacido de una profunda pasión por la artesanía y el arte, Mosaia Studio fusiona la tradición y el diseño moderno," },
            'intro_text_bronze': { fr: "mêlant la précision artisanale à l’expression artistique.", en: "blending hand-crafted precision with artistic expression.", nl: "waarbij handgemaakte precisie wordt gecombineerd met artistieke expressie.", de: "verbindet handwerkliche Präzision mit künstlerischem Ausdruck.", es: "mezclando la precisión artesanal con la expresión artística." },
            
            'key_domains_title': { fr: "NOS DOMAINES CLÉS", en: "OUR KEY DOMAINS", nl: "ONZE BELANGRIJKSTE DOMEINEN", de: "UNSERE SCHLÜSSELBEREICHE", es: "NUESTROS DOMINIOS CLAVE" },
            
            'domain_pools_title': { fr: "PISCINES", en: "POOLS", nl: "ZWEMBADEN", de: "POOLS", es: "PISCINAS" },
            'domain_pools_desc': { fr: "Transformez votre piscine en une œuvre d'art aquatique durable et sophistiquée.", en: "Transform your pool into a durable and sophisticated aquatic work of art.", nl: "Transformeer uw zwembad in een duurzaam en verfijnd waterkunstwerk.", de: "Verwandeln Sie Ihren Pool in ein langlebiges und raffiniertes Wasserkunstwerk.", es: "Transforma tu piscina en una obra de arte acuática duradera y sofisticada." },
            
            'domain_walls_title': { fr: "MURS & FAÇADES", en: "WALLS & FACADES", nl: "MUREN & GEVELS", de: "WÄNDE & FASSADEN", es: "MUROS & FACHADAS" },
            'domain_walls_desc': { fr: "Revêtements architecturaux d'exception pour intérieurs et extérieurs, redéfinissant l'espace.", en: "Exceptional architectural coverings for interiors and exteriors, redefining the space.", nl: "Uitzonderlijke architecturale bekleding voor interieur en exterieur, die de ruimte herdefinieert.", de: "Außergewöhnliche architektonische Verkleidungen für innen und außen, die den Raum neu definieren.", es: "Revestimientos arquitectónicos excepcionales para interiores y exteriores, redefiniendo el espacio." },
            
            'domain_artworks_title': { fr: "ARTWORKS", en: "ARTWORKS", nl: "KUNSTWERKEN", de: "KUNSTWERKE", es: "OBRAS DE ARTE" },
            'domain_artworks_desc': { fr: "Œuvres d'art uniques et installations personnalisées. L'expression pure de votre vision créative.", en: "Unique artworks and custom installations. The pure expression of your creative vision.", nl: "Unieke kunstwerken en gepersonaliseerde installaties. De pure uitdrukking van uw creatieve visie.", de: "Einzigartige Kunstwerke und kundenspezifische Installationen. Der reine Ausdruck Ihrer kreativen Vision.", es: "Obras de arte únicas e instalaciones personnalisées. La expresión pura de su visión creativa." },
            
            'quote_1_bronze': { fr: "« La mosaïque n’est pas une décoration,", en: "« Mosaic is not decoration,", nl: "« Mozaïek is geen decoratie,", de: "« Mosaik ist keine Dekoration,", es: "« El mosaico no es una decoración," },
            'quote_2': { fr: "c’est une narration. »", en: "it is a narrative. »", nl: "het is een verhaal. »", de: "es ist eine Erzählung. »", es: "es una narración. »" },
            
            'footer_copyright': { fr: "© MOSAIA STUDIO – PAR AMARU BRANDS", en: "© MOSAIA STUDIO – BY AMARU BRANDS", nl: "© MOSAIA STUDIO – DOOR AMARU BRANDS", de: "© MOSAIA STUDIO – VON AMARU BRANDS", es: "© MOSAIA STUDIO – POR AMARU BRANDS" },
            'footer_tagline': { fr: "L'ART DE LA MOSAÏQUE QUI ÉVEILLE L'ÉMOTION ET DURE", en: "THE ART OF MOSAIC THAT AWAKENS EMOTION AND ENDURES", nl: "DE KUNST VAN MOZAÏEK DAT EMOTIE OPROEPT EN VOORTDUURT", de: "DIE KUNST DES MOSAIKS, DIE EMOTIONEN WECKT UND BESTEHT", es: "EL ARTE DEL MOSAICO QUE DESPIERTA EMOCIÓN ET PERDURA" },
            'lang_selector_title': { fr: "Choisir la Langue", en: "Choose Language", nl: "Taal Kiezen", de: "Sprache Wählen", es: "Elegir Idioma" }
        };

        let currentLang = 'fr'; // Langue par défaut

        // Fonction pour traduire le contenu de la page actuelle
        function updateContentTranslations(lang) {
            currentLang = lang;
            document.documentElement.lang = lang;

            // Met à jour le titre de la page
            const pageTitleElement = document.querySelector('title[data-translate-key="page_title"]');
            if (pageTitleElement && translations['page_title'][lang]) {
                 pageTitleElement.textContent = translations['page_title'][lang];
            } else if (translations['page_title'][lang]) {
                 document.title = translations['page_title'][lang];
            }

            // Met à jour tous les éléments avec l'attribut data-translate-key
            document.querySelectorAll('[data-translate-key]').forEach(element => {
                const key = element.getAttribute('data-translate-key');
                if (translations[key] && translations[key][lang]) {
                    element.innerHTML = translations[key][lang];
                }
            });

            // Met à jour l'affichage de la langue actuelle dans le dropdown desktop
            const currentLangDisplay = document.getElementById('current-lang-display');
            if (currentLangDisplay) {
                currentLangDisplay.textContent = lang.toUpperCase();
            }

            // Gère l'état actif des boutons et options
            document.querySelectorAll('.lang-button, .lang-option').forEach(element => {
                element.classList.remove('active', 'text-bronze', 'font-semibold');
                element.classList.add('hover:text-bronze'); // S'assure de conserver l'état de survol

                if (element.getAttribute('data-lang') === lang) {
                    element.classList.add('active', 'text-bronze', 'font-semibold');
                    element.classList.remove('hover:text-bronze'); // Supprimer le hover pour l'actif
                }
            });
            
            // Met à jour les liens de navigation après la traduction
            updateNavigationLinks(lang);
        }
        
        // --- 2. FONCTION POUR GÉRER LES LIENS DE NAVIGATION (ex: index.html vers /en/index.html) ---
        // S'assure que les liens dans la barre de navigation pointent vers la version linguistique correcte.
        function updateNavigationLinks(lang) {
            const isDefaultLang = (lang === 'fr');
            
            document.querySelectorAll('.nav-lang-link').forEach(link => {
                const href = link.getAttribute('href');
                if (!href || href === '#') return; // Ignore les liens vides

                // Supprime tout préfixe de langue existant pour travailler à partir d'une base FR propre
                let cleanHref = href.replace(/^\/(en|nl|de|es)\//, '').replace(/^\.\.\/(en|nl|de|es)\//, '');
                
                // S'assure que le lien ne commence pas par un slash pour les fichiers FR
                cleanHref = cleanHref.startsWith('/') ? cleanHref.substring(1) : cleanHref;

                if (isDefaultLang) {
                    // Pour le Français (FR), utilise le lien de base (ex: portfolio.html)
                    link.href = cleanHref;
                } else {
                    // Pour les autres langues, ajoute le préfixe (ex: /en/portfolio.html)
                    link.href = `/${lang}/${cleanHref}`;
                }
            });
        }


        // --- 3. FONCTION CLÉ : GESTION DU CHANGEMENT DE LANGUE ET DE LA REDIRECTION ---
        function switchLanguage(lang) {
            // Étape 1 : Enregistre la langue sélectionnée pour la persistance
            localStorage.setItem('userLanguage', lang);
            
            // Étape 2 : Détermine la nouvelle URL de la page
            const currentPath = window.location.pathname.replace(/\/$/, '');
            const supportedLangs = ['en', 'nl', 'de', 'es'];

            // 1. Détermine le nom du fichier actuel (ex: index.html ou portfolio.html)
            const fileNameMatch = currentPath.match(/\/([a-zA-Z0-9_\-]+\.html)$/);
            const fileName = fileNameMatch ? fileNameMatch[1] : 'index.html';

            // 2. Détermine la langue actuelle basée sur l'URL
            const currentLangMatch = currentPath.match(new RegExp(`\/(${supportedLangs.join('|')})\/`));
            const oldLang = currentLangMatch ? currentLangMatch[1] : 'fr';

            let newUrl;

            if (lang === 'fr') {
                // Si la nouvelle langue est 'fr', on redirige vers la racine (sans préfixe /fr/)
                // Ex: /en/index.html -> /index.html
                if (oldLang !== 'fr') {
                    // Remplace le préfixe /lang/ par / (ou enlève le préfixe si index.html)
                    newUrl = currentPath.replace(new RegExp(`\/${oldLang}\/`), '/');
                } else {
                    // Si déjà en FR, l'URL reste la même (ex: /index.html)
                    newUrl = currentPath;
                }
                
                // Nettoyer l'URL si elle devient un simple slash (pour index.html)
                if (newUrl === `/${fileName}`) {
                    newUrl = fileName;
                }

            } else {
                // Si la nouvelle langue est autre que 'fr'
                // Ex: /index.html -> /en/index.html
                // Ex: /de/index.html -> /en/index.html
                if (oldLang === 'fr') {
                    // Ajoute le nouveau préfixe
                    newUrl = `/${lang}/${fileName}`;
                } else {
                    // Remplace l'ancien préfixe par le nouveau
                    newUrl = currentPath.replace(`/${oldLang}/`, `/${lang}/`);
                }
            }
            
            // Nettoyage final pour s'assurer que newUrl commence par / si c'est une sous-page dans un sous-dossier
            if (newUrl.startsWith(fileName) && fileName !== 'index.html') {
                newUrl = `/${newUrl}`;
            }

            // Redirection ou mise à jour du contenu
            if (window.location.pathname.replace(/\/$/, '') === newUrl || window.location.pathname.replace(/\/$/, '') === `/${newUrl}`) {
                updateContentTranslations(lang); // Pas de changement d'URL, juste mise à jour
            } else {
                window.location.href = newUrl.startsWith('/') ? newUrl : `/${newUrl}`; // Redirection
            }
        }


        // --- 4. INITIALISATION LORS DU CHARGEMENT DE LA PAGE ---
        document.addEventListener('DOMContentLoaded', () => {
            
            // Récupère la langue du Stockage Local
            let storedLang = localStorage.getItem('userLanguage');
            
            // Détecte la langue dans l'URL (ex: pour quelqu'un qui arrive directement sur /en/index.html)
            const pathLangMatch = window.location.pathname.match(/\/(en|nl|de|es)\//);
            let urlLang = pathLangMatch ? pathLangMatch[1] : 'fr';

            // Logique d'initialisation :
            // 1. Si une langue est stockée ET qu'elle ne correspond pas à la langue de l'URL, on redirige.
            // 2. Sinon, on utilise la langue de l'URL ou la langue stockée pour traduire.
            
            if (storedLang && storedLang !== urlLang) {
                // Si l'utilisateur a déjà choisi une langue, mais l'URL actuelle est différente, on corrige.
                switchLanguage(storedLang);
                return;
            }

            // Initialise la langue sur la base de l'URL (qui correspond à la structure du fichier)
            const initialLang = urlLang || storedLang || 'fr';
            updateContentTranslations(initialLang); 
            
            // --- GESTION DU MENU MOBILE (inchangée) ---
            const mobileMenu = document.getElementById('mobileMenu');
            const mobileMenuBtn = document.getElementById('mobileMenuBtn');
            const langDropdownBtn = document.getElementById('lang-dropdown-btn');
            const langMenu = document.getElementById('lang-menu');
            const dropdownArrow = document.getElementById('dropdown-arrow');
            const langDropdownContainer = document.getElementById('lang-dropdown-container');
            
            function toggleMobileMenu() {
                const isExpanded = mobileMenuBtn.getAttribute('aria-expanded') === 'true';
                mobileMenuBtn.setAttribute('aria-expanded', String(!isExpanded));
                mobileMenu.classList.toggle('hidden');
            }
            
            mobileMenuBtn.addEventListener('click', toggleMobileMenu);

            // LOGIQUE DU DROPDOWN DE LANGUE DESKTOP
            if (langDropdownBtn && langMenu) {
                langDropdownBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    e.stopPropagation(); 
                    const isExpanded = langDropdownBtn.getAttribute('aria-expanded') === 'true';
                    
                    if (isExpanded) {
                        langMenu.classList.add('hidden');
                        dropdownArrow.classList.remove('rotate-180');
                        langDropdownBtn.setAttribute('aria-expanded', 'false');
                    } else {
                        langMenu.classList.remove('hidden');
                        dropdownArrow.classList.add('rotate-180');
                        langDropdownBtn.setAttribute('aria-expanded', 'true');
                    }
                });

                document.addEventListener('click', (e) => {
                    if (langDropdownContainer && !langDropdownContainer.contains(e.target)) {
                        langMenu.classList.add('hidden');
                        dropdownArrow.classList.remove('rotate-180');
                        langDropdownBtn.setAttribute('aria-expanded', 'false');
                    }
                });
            }
            
            // --- ÉCOUTEURS D'ÉVÉNEMENTS POUR LE CHANGEMENT DE LANGUE ---
            document.querySelectorAll('.lang-option, .lang-button').forEach(button => {
                button.addEventListener('click', (e) => {
                    e.preventDefault(); 
                    const lang = button.getAttribute('data-lang');
                    
                    // Fermer les menus lors du clic (même si la langue est la même)
                    if (langMenu && !langMenu.classList.contains('hidden')) {
                         langMenu.classList.add('hidden');
                         dropdownArrow.classList.remove('rotate-180');
                         langDropdownBtn.setAttribute('aria-expanded', 'false');
                    }
                    if (!mobileMenu.classList.contains('hidden')) {
                        toggleMobileMenu();
                    }
                    
                    // Si la langue est déjà active et que l'URL est correcte, on ne fait rien de plus.
                    if (lang === currentLang) return;
                    
                    switchLanguage(lang);
                });
            });
            
            // --- LOGIQUE D'ANIMATION (Conservée) ---
            const observerOptions = { threshold: 0.1, rootMargin: '0px 0px -50px 0px' };
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('fade-in-up');
                        entry.target.classList.remove('opacity-0', 'translate-y-[40px]');
                        observer.unobserve(entry.target);
                    }
                });
            }, observerOptions);

            document.querySelectorAll('.fade-in-up').forEach(element => {
                element.classList.add('opacity-0', 'translate-y-[40px]');
                observer.observe(element);
            });
        });
    </script>
</body>
</html>
