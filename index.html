<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title data-translate-key="page_title">Mosaia Studio - Home</title>

    <!-- Tailwind CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800&family=Open+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: { 'bronze': '#C99B4F', 'charcoal': '#1A1A1A', 'pure-white': '#FFFFFF', 'light-gray': '#F8F8F8', 'medium-gray': '#666666' },
                    fontFamily: { 'title': ['Montserrat', 'sans-serif'], 'body': ['Open Sans', 'sans-serif'] }
                }
            }
        }
    </script>

    <style>
        /* Animation & visual */
        .fade-in-up { animation: fadeInUp 1.2s cubic-bezier(0.25,0.46,0.45,0.94) forwards; opacity: 0; transform: translateY(40px); }
        .fade-in-up.delay-1 { animation-delay: 0.3s; }
        .fade-in-up.delay-2 { animation-delay: 0.6s; }
        .fade-in-up.delay-3 { animation-delay: 0.9s; }
        @keyframes fadeInUp { to { opacity: 1; transform: translateY(0); } }

        .elegant-line { position: relative; }
        .elegant-line::after { content: ''; position: absolute; bottom: -12px; left: 50%; transform: translateX(-50%); width: 80px; height: 1px; background: linear-gradient(90deg, transparent, #C99B4F, transparent); }

        .cta-primary { background: linear-gradient(135deg, #C99B4F, #B8894A); transition: all 0.4s ease; position: relative; overflow: hidden; border: 1px solid rgba(201,155,79,0.3); font-family:'Montserrat',sans-serif; font-weight:600; }
        .cta-primary:hover { transform: translateY(-2px); box-shadow: 0 8px 24px rgba(201,155,79,0.2); background:#1A1A1A; color:#C99B4F; }
        .cta-secondary { 
    border: 2px solid #FFFFFF; /* ⭐ CHANGÉ : Cadre/Bordure en Blanc */
    color: #FFFFFF; /* ⭐ CHANGÉ : Texte en Blanc */
    transition: all 0.4s ease; 
    font-family:'Montserrat',sans-serif; 
    font-weight:500; 
}
.cta-secondary:hover { 
    background: #FFFFFF; /* CHANGÉ : Fond Blanc au survol (pour s'harmoniser avec la bordure blanche) */
    color: #1A1A1A; /* Texte Charbon au survol (pour être lisible sur le fond blanc) */
    transform: translateY(-2px); 
}

        .nav-link { position: relative; transition: all 0.3s ease; }
        .nav-link:hover { color: #C99B4F; }
        .nav-link::after { content: ''; position: absolute; bottom: -4px; left: 0; width: 0; height: 1px; background: #C99B4F; transition: width 0.3s ease; }
        .nav-link:hover::after, .nav-link.active::after { width: 100%; }

        .page-section { padding-top: 100px; padding-bottom: 100px; }

        /* Lang selector */
        .lang-button { background: none; border: 1px solid transparent; padding: 4px 8px; border-radius: 4px; transition: all 0.3s; }
        .lang-button:hover { background: rgba(201,155,79,0.1); border-color:#C99B4F; }
        .lang-button.active { background:#C99B4F; color:#1A1A1A; font-weight:600; border-color:#C99B4F; }

        /* Dropdown arrow rotation */
        #dropdown-arrow { transition: transform 0.25s ease; }
        .rotate-180 { transform: rotate(180deg); }

        /* HERO CAROUSEL styles */
        .hero-carousel { position: relative; width: 100%; height: calc(100vh - 80px); /* subtract header height approx */ overflow: hidden; }
        .carousel-slide { position: absolute; inset: 0; opacity: 0; transition: opacity 1.2s ease-in-out; }
        .carousel-slide img { width: 100%; height: 100%; object-fit: cover; display:block; }
        .carousel-slide.active { opacity: 1; z-index: 10; }

        /* Overlay on carousel to keep white text readable */
        .hero-carousel::before {
            content: '';
            position: absolute;
            inset: 0;
            z-index: 15;
            background: linear-gradient(135deg, rgba(26,26,26,0.55) 0%, rgba(201,155,79,0.05) 50%, rgba(26,26,26,0.7) 100%);
            pointer-events: none;
        }

        /* place hero content above overlay */
        .hero-content { position: relative; z-index: 20; }

        /* header */
        header { background-color: rgba(255,255,255,0.98); backdrop-filter: blur(6px); position: sticky; top:0; z-index:40; border-bottom: 1px solid rgba(26,26,26,0.05); }

        /* --- HERO MAIN BUTTON (bouton principal blanc) --- */
.hero-main-btn {
  border: 2px solid white;
  color: white;
  background: transparent;
  padding: 0.75rem 1.5rem;
  border-radius: 9999px;
  font-family: 'Montserrat', sans-serif;
  font-weight: 600;
  letter-spacing: 0.05em;
  transition: all 0.3s ease;
}

.hero-main-btn:hover {
  background: white;
  color: #1A1A1A;
  transform: translateY(-2px);
}
    </style>
</head>
<body class="bg-pure-white font-body text-charcoal">

    <!-- ====== HEADER ====== -->
    <header class="bg-pure-white/98 shadow-sm">
        <div class="max-w-7xl mx-auto px-6 lg:px-8">
            <div class="flex items-center justify-between h-20">
                <div class="flex items-center space-x-4">
                    <a href="index.html" data-page-name="index.html" class="flex items-center">
<img src="https://raw.githubusercontent.com/allo-les-anges/mosaia/main/mosaia-assets/logos/logo%20mosaia%203D.png" alt="Mosaia Studio Logo 3D" class="h-12 lg:h-14.4 w-auto"></a>
                </div>

                <nav class="hidden md:block">
                    <div class="flex items-center space-x-8 lg:space-x-10">
                        <a href="index.html" data-translate-key="nav_home" data-page-name="index.html" class="nav-link text-bronze border-b-2 border-bronze px-1 py-2 text-sm font-body font-medium tracking-wide uppercase">HOME</a>
                        <a href="portfolio.html" data-translate-key="nav_portfolio" data-page-name="portfolio.html" class="nav-link text-charcoal px-1 py-2 text-sm font-body font-medium tracking-wide uppercase">PORTFOLIO</a>
                        <a href="studio.html" data-translate-key="nav_studio" data-page-name="studio.html" class="nav-link text-charcoal px-1 py-2 text-sm font-body font-medium tracking-wide uppercase">STUDIO</a>
                        <a href="sur-mesure.html" data-translate-key="nav_bespoke" data-page-name="sur-mesure.html" class="nav-link text-charcoal px-1 py-2 text-sm font-body font-medium tracking-wide uppercase">BESPOKE</a>
                        <a href="processus.html" data-translate-key="nav_process" data-page-name="processus.html" class="nav-link text-charcoal px-1 py-2 text-sm font-body font-medium tracking-wide uppercase">PROCESS</a>
                        <a href="partenaires.html" data-translate-key="nav_partners" data-page-name="partenaires.html" class="nav-link text-charcoal px-1 py-2 text-sm font-body font-medium tracking-wide uppercase">PARTNERS</a>
                        <a href="contact.html" data-translate-key="nav_contact" data-page-name="contact.html" class="nav-link text-charcoal px-1 py-2 text-sm font-body font-medium tracking-wide uppercase">CONTACT</a>

                        <!-- Lang dropdown (desktop) -->
                        <div class="relative ml-4 pl-4 border-l border-charcoal/10" id="lang-dropdown-container">
                            <button id="lang-dropdown-btn" class="lang-button text-charcoal text-sm font-title font-medium flex items-center p-2" aria-expanded="false" aria-controls="lang-menu" aria-label="Select language">
                                <span id="current-lang-display" class="font-semibold text-bronze">EN</span>
                                <svg class="h-4 w-4 ml-1 transition-transform duration-200" fill="none" viewBox="0 0 24 24" stroke="currentColor" id="dropdown-arrow"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /></svg>
                            </button>

                            <div id="lang-menu" class="absolute right-0 mt-3 w-36 bg-pure-white shadow-xl rounded-md ring-1 ring-charcoal/5 hidden origin-top-right py-1 z-50" role="menu" aria-orientation="vertical" aria-labelledby="lang-dropdown-btn">
                                <a href="#" class="block px-4 py-2 text-sm text-charcoal hover:bg-light-gray lang-option" role="menuitem" data-lang="fr">Français</a>
                                <a href="#" class="block px-4 py-2 text-sm text-charcoal hover:bg-light-gray lang-option active" role="menuitem" data-lang="en">English</a>
                                <a href="#" class="block px-4 py-2 text-sm text-charcoal hover:bg-light-gray lang-option" role="menuitem" data-lang="nl">Nederlands</a>
                                <a href="#" class="block px-4 py-2 text-sm text-charcoal hover:bg-light-gray lang-option" role="menuitem" data-lang="de">Deutsch</a>
                                <a href="#" class="block px-4 py-2 text-sm text-charcoal hover:bg-light-gray lang-option" role="menuitem" data-lang="es">Español</a>
                            </div>
                        </div>

                    </div>
                </nav>

                <!-- Mobile menu button -->
                <div class="md:hidden flex items-center">
                    <button id="mobileMenuBtn" class="text-charcoal hover:text-bronze p-2" data-translate-key="menu_btn" aria-label="Mobile menu" aria-expanded="false" aria-controls="mobileMenu">
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg>
                    </button>
                </div>
            </div>

            <!-- Mobile nav -->
            <div id="mobileMenu" class="md:hidden bg-pure-white border-t border-charcoal/10 hidden">
                <div class="px-6 py-4 space-y-2">
                    <a href="index.html" data-translate-key="nav_home" data-page-name="index.html" class="block py-2 text-charcoal font-body font-medium uppercase">HOME</a>
                    <a href="portfolio.html" data-translate-key="nav_portfolio" data-page-name="portfolio.html" class="block py-2 text-charcoal font-body font-medium uppercase">PORTFOLIO</a>
                    <a href="studio.html" data-translate-key="nav_studio" data-page-name="studio.html" class="block py-2 text-charcoal font-body font-medium uppercase">STUDIO</a>
                    <a href="sur-mesure.html" data-translate-key="nav_bespoke" data-page-name="sur-mesure.html" class="block py-2 text-charcoal font-body font-medium uppercase">BESPOKE</a>
                    <a href="processus.html" data-translate-key="nav_process" data-page-name="processus.html" class="block py-2 text-charcoal font-body font-medium uppercase">PROCESS</a>
                    <a href="partenaires.html" data-translate-key="nav_partners" data-page-name="partenaires.html" class="block py-2 text-charcoal font-body font-medium uppercase">PARTNERS</a>
                    <a href="contact.html" data-translate-key="nav_contact" data-page-name="contact.html" class="block py-2 text-charcoal font-body font-medium uppercase">CONTACT</a>

                    <div id="lang-selector-mobile" class="pt-4 border-t border-charcoal/10">
                        <h4 data-translate-key="lang_selector_title" class="text-sm font-title font-medium text-charcoal mb-2 uppercase">Choose Language</h4>
                        <div class="flex flex-wrap gap-2">
                            <button class="lang-button text-charcoal text-sm" data-lang="fr">Français</button>
                            <button class="lang-button text-charcoal text-sm active" data-lang="en">English</button>
                            <button class="lang-button text-charcoal text-sm" data-lang="nl">Nederlands</button>
                            <button class="lang-button text-charcoal text-sm" data-lang="de">Deutsch</button>
                            <button class="lang-button text-charcoal text-sm" data-lang="es">Español</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- ====== HERO: CAROUSEL (remplace le background statique) ====== -->
    <main>
        <section class="hero-carousel" aria-label="Hero carousel">
            <div class="carousel-slide active" role="group" aria-roledescription="slide" aria-label="Slide 1 of 3">
                <img src="https://raw.githubusercontent.com/allo-les-anges/mosaia/main/mosaia-assets/logos/getty-images-cb0Ft3TXPt4-unsplash.jpg" alt="Luxury pool mosaic 1">
            </div>

            <div class="carousel-slide" role="group" aria-roledescription="slide" aria-label="Slide 2 of 3">
                <img src="https://raw.githubusercontent.com/allo-les-anges/mosaia/main/mosaia-assets/logos/armand-khoury-cGpQM-snU20-unsplash.jpg" alt="Luxury pool mosaic 2">
            </div>

            <div class="carousel-slide" role="group" aria-roledescription="slide" aria-label="Slide 3 of 3">
                <img src="https://raw.githubusercontent.com/allo-les-anges/mosaia/main/mosaia-assets/logos/gower-brown-9MvxNFLcsBU-unsplash.jpg" alt="Luxury pool mosaic 3">
            </div>

            <div class="hero-content flex items-center justify-center text-center absolute inset-0">
                <div class="max-w-6xl mx-auto px-6 py-28">
                    <h2 class="text-5xl md:text-6xl lg:text-7xl font-title font-bold text-pure-white mb-8 tracking-widest uppercase fade-in-up elegant-line" data-translate-key="hero_title">
                        THE ART OF MOSAIC<br>
                        <span class="text-bronze font-light" data-translate-key="hero_title_bronze">THAT AWAKENS EMOTION</span><br>
                        <span data-translate-key="hero_title_end">AND ENDURES</span>
                    </h2>

                    <div class="flex flex-col sm:flex-row gap-6 justify-center fade-in-up delay-1">
                        <a href="portfolio.html" data-translate-key="cta_portfolio" data-page-name="portfolio.html" class="cta-primary px-8 py-3 text-pure-white tracking-widest uppercase">EXPLORE THE PORTFOLIO</a>
                        <a href="sur-mesure.html" data-translate-key="cta_bespoke" data-page-name="sur-mesure.html" class="cta-secondary px-8 py-3 tracking-widest uppercase">START A BESPOKE PROJECT</a>
                    </div>
                </div>
            </div>
        </section>

        <section class="page-section bg-pure-white">
            <div class="max-w-4xl mx-auto px-6 text-center">
                <div class="w-20 h-px bg-bronze mx-auto mb-10 fade-in-up"></div>
                <p class="text-xl md:text-2xl text-medium-gray leading-relaxed font-body font-light tracking-wide fade-in-up delay-1" data-translate-key="intro_text">
                    Born from a deep passion for craftsmanship and art, Mosaia Studio merges tradition with modern design,
                    <span class="text-bronze font-normal" data-translate-key="intro_text_bronze">blending hand-crafted precision with artistic expression.</span>
                </p>
            </div>
        </section>

        <section class="page-section bg-light-gray">
            <div class="max-w-7xl mx-auto px-6 lg:px-8">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
                    
                    <div class="fade-in-up">
                        <h3 data-translate-key="what_we_do_title" class="text-4xl font-title font-bold text-charcoal mb-6 elegant-line inline-block">WHAT WE DO</h3>
                        <p data-translate-key="what_we_do_intro" class="text-xl md:text-2xl text-medium-gray leading-relaxed font-body font-light mb-6">
                            Mosaia Studio brings centuries of mosaic artistry into contemporary design. We partner with architects, designers, and private clients to create bespoke, enduring surfaces.
                        </p>
                        <p data-translate-key="what_we_do_detail" class="text-medium-gray mb-8">
                            Our process combines high-end materials—from glass to natural stone—with meticulous hand-setting techniques. Every project, whether a custom pool, an architectural façade, or a unique art installation, is a unique collaboration, crafted to reflect a singular vision and stand the test of time.
                        </p>
                        <a href="processus.html" data-translate-key="cta_learn_more" data-page-name="processus.html" class="cta-primary px-8 py-3 text-pure-white tracking-widest uppercase inline-block">LEARN MORE ABOUT OUR PROCESS</a>
                    </div>

                    <div class="fade-in-up delay-1">
                        <div class="relative pt-[56.25%] shadow-2xl rounded-xl overflow-hidden">
                            <video class="absolute top-0 left-0 w-full h-full" 
                                src="videos/WhatsApp Vidéo 2025-10-18 à 11.08.39_ef725303.mp4" 
                                autoplay 
                                loop 
                                muted
                                preload="auto"
                                title="Mosaia Studio Video Presentation">
                                Votre navigateur ne supporte pas la balise vidéo.
                            </video>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="min-h-[400px] bg-charcoal flex items-center justify-center bg-fixed bg-center bg-cover" style="background-image: url('data:image/svg+xml,<svg xmlns=&quot;http://www.w3.org/2000/svg&quot; viewBox=&quot;0 0 1000 1000&quot;><rect width=&quot;100%&quot; height=&quot;100%&quot; fill=&quot;%231A1A1A&quot;/><circle cx=&quot;500&quot; cy=&quot;500&quot; r=&quot;400&quot; fill=&quot;%23C99B4F&quot; opacity=&quot;0.05&quot;/></svg>');">
            <div class="max-w-4xl mx-auto px-6 text-center">
                <h3 class="text-4xl md:text-5xl font-title font-light text-pure-white leading-relaxed tracking-wide italic fade-in-up">
                    <span class="text-bronze font-normal" data-translate-key="quote_1_bronze">« Mosaic is not decoration,</span><br>
                    <span data-translate-key="quote_2">it is a narrative. »</span>
                </h3>
            </div>
        </section>
    </main>

   </footer>
    
    <script>
        // --- CONFIGURATION ---
        const BASE_URL = 'https://allo-les-anges.github.io/mosaia/';
        const DEFAULT_LANG = 'en';

        // --- TRANSLATIONS (TRADUCTIONS MISES À JOUR) ---
        const translations = {
            'page_title': { fr: "Mosaia Studio - Accueil", en: "Mosaia Studio - Home", nl: "Mosaia Studio - Startpagina", de: "Mosaia Studio - Startseite", es: "Mosaia Studio - Inicio" },
            'nav_home': { fr: "ACCUEIL", en: "HOME", nl: "STARTPAGINA", de: "STARTSEITE", es: "INICIO" },
            'nav_portfolio': { fr: "PORTFOLIO", en: "PORTFOLIO", nl: "PORTFOLIO", de: "PORTFOLIO", es: "PORTAFOLIO" },
            'nav_studio': { fr: "STUDIO", en: "STUDIO", nl: "STUDIO", de: "STUDIO", es: "ESTUDIO" },
            'nav_bespoke': { fr: "SUR-MESURE", en: "BESPOKE", nl: "MAATWERK", de: "MAẞARBEIT", es: "A MEDIDA" },
            'nav_process': { fr: "PROCESSUS", en: "PROCESS", nl: "PROCES", de: "PROZESS", es: "PROCESO" },
            'nav_partners': { fr: "PARTENAIRES", en: "PARTNERS", nl: "PARTNERS", de: "PARTNER", es: "SOCIOS" },
            'nav_contact': { fr: "CONTACT", en: "CONTACT", nl: "CONTACT", de: "KONTAKT", es: "CONTACTO" },
            'menu_btn': { fr: "Menu", en: "Menu", nl: "Menu", de: "Menü", es: "Menú" },

            'hero_title': { fr: "L’ART DE LA MOSAÏQUE", en: "THE ART OF MOSAIC", nl: "DE KUNST VAN MOZAÏEK", de: "DIE KUNST DES MOSAIKS", es: "EL ARTE DEL MOSAICO" },
            'hero_title_bronze': { fr: "QUI ÉVEILLE L’ÉMOTION", en: "THAT AWAKENS EMOTION", nl: "DAT EMOTIE OPROEPT", de: "DIE EMOTIONEN WECKT", es: "QUE DESPIERTA EMOCIÓN" },
            'hero_title_end': { fr: "ET PERDURE", en: "AND ENDURES", nl: "EN VOORTDUURT", de: "UND BESTEHT", es: "Y PERDURA" },

            'cta_portfolio': { fr: "EXPLORER LE PORTFOLIO", en: "EXPLORE THE PORTFOLIO" },
            'cta_bespoke': { fr: "DÉMARRER UN PROJET SUR MESURE", en: "START A BESPOKE PROJECT" },

            'intro_text': { fr: "Né d’une passion profonde pour l’artisanat et l’art, Mosaia Studio fusionne la tradition et le design moderne,", en: "Born from a deep passion for craftsmanship and art, Mosaia Studio merges tradition with modern design," },
            'intro_text_bronze': { fr: "mêlant la précision artisanale à l’expression artistique.", en: "blending hand-crafted precision with artistic expression." },
            
            // NOUVELLES CLÉS POUR LA SECTION "WHAT WE DO"
            'what_we_do_title': { fr: "NOTRE SAVOIR-FAIRE", en: "WHAT WE DO" },
            'what_we_do_intro': { fr: "Mosaia Studio apporte des siècles d'art de la mosaïque au design contemporain. Nous collaborons avec des architectes, designers, et clients privés pour créer des surfaces sur mesure et durables.", en: "Mosaia Studio brings centuries of mosaic artistry into contemporary design. We partner with architects, designers, and private clients to create bespoke, enduring surfaces." },
            'what_we_do_detail': { fr: "Notre processus combine des matériaux haut de gamme—du verre à la pierre naturelle—avec des techniques de pose méticuleuses et artisanales. Chaque projet, qu'il s'agisse d'une piscine sur mesure, d'une façade architecturale, ou d'une installation artistique unique, est une collaboration singulière, conçue pour refléter une vision unique et traverser le temps.", en: "Our process combines high-end materials—from glass to natural stone—with meticulous hand-setting techniques. Every project, whether a custom pool, an architectural façade, or a unique art installation, is a unique collaboration, crafted to reflect a singular vision and stand the test of time." },
            'cta_learn_more': { fr: "EN SAVOIR PLUS SUR NOTRE PROCESSUS", en: "LEARN MORE ABOUT OUR PROCESS" },

            'quote_1_bronze': { fr: "« La mosaïque n’est pas une décoration,", en: "« Mosaic is not decoration," },
            'quote_2': { fr: "c’est une narration. »", en: "it is a narrative. »" },

            // NOUVELLES CLÉS POUR LE FOOTER
            'footer_copyright': { fr: "© MOSAIA STUDIO – PAR AMARU BRANDS", en: "© MOSAIA STUDIO – BY AMARU BRANDS" },
            'footer_services_title': { fr: "Services", en: "Services" },
            'footer_service_pools': { fr: "Piscines & Spas", en: "Pools & Spas" },
            'footer_service_facades': { fr: "Façades & Murs", en: "Facades & Walls" },
            'footer_service_art': { fr: "Art & Design", en: "Art & Design" },
            'footer_about_title': { fr: "Studio", en: "Studio" }, 
            'footer_legal_title': { fr: "Légal", en: "Legal" },
            'footer_cookies': { fr: "Avis de cookies", en: "Cookies notice" },
            'footer_conditions': { fr: "Conditions d'utilisation", en: "Conditions of use" },
            'footer_privacy': { fr: "Politique de confidentialité", en: "Privacy notice" },
            'footer_newsletter_title': { fr: "Abonnez-vous à « Mosaia News »", en: 'Subscribe to "Mosaia News"' },
            'footer_newsletter_tagline': { fr: "Restez informé des dernières nouvelles sur la mosaïque, le design et les événements.", en: "Stay tuned with the latest news about mosaics, design, and events." },
            'footer_checkbox_policy': { fr: "J'ai lu et j'accepte la Politique de Confidentialité Mosaia", en: "I have read and accept the Mosaia Privacy Policy" },
            'footer_checkbox_commercial': { fr: "J'accepte la communication commerciale", en: "I accept the commercial communication" },
            'footer_subscribe_btn': { fr: "S'ABONNER", en: "SUBSCRIBE" },
        };

        // --- Update navigation links to GitHub Pages absolute paths ---
        function updateNavigationLinks() {
            document.querySelectorAll('a[data-page-name]').forEach(link => {
                const pageName = link.getAttribute('data-page-name');
                if (pageName) link.href = BASE_URL + pageName;
            });
        }

        // --- Translation & persistence ---
        function updateContentTranslations(lang) {
            document.documentElement.lang = lang;
            const pageTitleKey = document.querySelector('title').getAttribute('data-translate-key') || 'page_title';
            if (translations[pageTitleKey] && translations[pageTitleKey][lang]) {
                document.title = translations[pageTitleKey][lang];
            } else {
                document.title = translations['page_title'][DEFAULT_LANG];
            }

            document.querySelectorAll('[data-translate-key]').forEach(el => {
                const key = el.getAttribute('data-translate-key');
                if (translations[key]) {
                    el.innerHTML = translations[key][lang] || translations[key][DEFAULT_LANG] || el.innerHTML;
                }
            });

            // mark active language on UI
            document.querySelectorAll('.lang-option, .lang-button[data-lang]').forEach(btn => {
                btn.classList.remove('active');
                if (btn.getAttribute('data-lang') === lang) btn.classList.add('active');
            });

            // Update current-lang display
            const cur = document.getElementById('current-lang-display');
            if (cur) cur.textContent = lang.toUpperCase();

            // update links for github pages
            updateNavigationLinks();
        }

        function switchLanguage(lang) {
            localStorage.setItem('userLanguage', lang);
            updateContentTranslations(lang);

            // close menus if open
            const langMenu = document.getElementById('lang-menu');
            const dropdownArrow = document.getElementById('dropdown-arrow');
            const langDropdownBtn = document.getElementById('lang-dropdown-btn');
            const mobileMenu = document.getElementById('mobileMenu');
            const mobileMenuBtn = document.getElementById('mobileMenuBtn');

            if (langMenu && !langMenu.classList.contains('hidden')) {
                langMenu.classList.add('hidden');
                dropdownArrow.classList.remove('rotate-180');
                if (langDropdownBtn) langDropdownBtn.setAttribute('aria-expanded', 'false');
            }
            if (mobileMenu && !mobileMenu.classList.contains('hidden')) {
                mobileMenu.classList.add('hidden');
                if (mobileMenuBtn) mobileMenuBtn.setAttribute('aria-expanded', 'false');
            }
        }

        // --- CAROUSEL logic (will be initialized after DOM ready) ---
        let carouselInterval = null;
        function initCarousel({ interval = 5000 } = {}) {
            const slides = document.querySelectorAll('.carousel-slide');
            if (!slides || slides.length === 0) return;
            let index = 0;
            function show(i) {
                slides.forEach((s, idx) => s.classList.toggle('active', idx === i));
            }
            show(index);
            carouselInterval = setInterval(() => {
                index = (index + 1) % slides.length;
                show(index);
            }, interval);
        }

        // --- DOMContentLoaded initialization ---
        document.addEventListener('DOMContentLoaded', () => {
            // pick saved language or default
            const saved = localStorage.getItem('userLanguage') || DEFAULT_LANG;
            updateContentTranslations(saved);

            // attach language selector handlers (desktop options and mobile buttons)
            document.querySelectorAll('.lang-option, .lang-button[data-lang]').forEach(el => {
                el.addEventListener('click', (e) => {
                    e.preventDefault();
                    const lang = el.getAttribute('data-lang');
                    if (lang) switchLanguage(lang);
                });
            });

            // mobile menu toggle
            const mobileMenuBtn = document.getElementById('mobileMenuBtn');
            const mobileMenu = document.getElementById('mobileMenu');
            if (mobileMenuBtn) {
                mobileMenuBtn.addEventListener('click', () => {
                    const expanded = mobileMenuBtn.getAttribute('aria-expanded') === 'true';
                    mobileMenuBtn.setAttribute('aria-expanded', String(!expanded));
                    if (mobileMenu) mobileMenu.classList.toggle('hidden');
                });
            }

            // lang dropdown desktop toggle
            const langDropdownBtn = document.getElementById('lang-dropdown-btn');
            const langMenu = document.getElementById('lang-menu');
            const dropdownArrow = document.getElementById('dropdown-arrow');
            if (langDropdownBtn && langMenu) {
                langDropdownBtn.addEventListener('click', (ev) => {
                    ev.stopPropagation();
                    const expanded = langDropdownBtn.getAttribute('aria-expanded') === 'true';
                    langDropdownBtn.setAttribute('aria-expanded', String(!expanded));
                    langMenu.classList.toggle('hidden');
                    if (dropdownArrow) dropdownArrow.classList.toggle('rotate-180');
                });

                // close on outside click
                document.addEventListener('click', (ev) => {
                    const container = document.getElementById('lang-dropdown-container');
                    if (!container.contains(ev.target) && !langMenu.classList.contains('hidden')) {
                        langMenu.classList.add('hidden');
                        langDropdownBtn.setAttribute('aria-expanded', 'false');
                        if (dropdownArrow) dropdownArrow.classList.remove('rotate-180');
                    }
                });
            }

            // initialize carousel
            initCarousel({ interval: 5000 });

            // ensure nav links use BASE_URL
            updateNavigationLinks();
        });
    </script>
</body>
</html>
